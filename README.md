Проект "Магазин "В один клик"
Описание проекта
Интернет-магазин «В один клик» продаёт разные товары: для детей, для дома, мелкую бытовую технику, косметику и даже продукты. Отчёт магазина за прошлый период показал, что активность покупателей начала снижаться. Привлекать новых клиентов уже не так эффективно: о магазине и так знает большая часть целевой аудитории. Возможный выход — удерживать активность постоянных клиентов. Сделать это можно с помощью персонализированных предложений.
Нам поручено разработать решение, которое позволит персонализировать предложения постоянным клиентам, чтобы увеличить их покупательскую активность.
Для работы нам предоставлены следующие данные:

market_file.csv - таблица, которая содержит данные о поведении покупателя на сайте, о коммуникациях с покупателем и его продуктовом поведении.
market_money.csv - таблица с данными о выручке, которую получает магазин с покупателя, то есть сколько покупатель всего потратил за период взаимодействия с сайтом.
market_time.csv - таблица с данными о времени (в минутах), которое покупатель провёл на сайте в течение периода.
money.csv - таблица с данными о среднемесячной прибыли покупателя за последние 3 месяца: какую прибыль получает магазин от продаж каждому покупателю.
Решать задачу предстоит в два этапа:

Необходимо разработать модель, которая предскажет вероятность снижения покупательской активности.
Далее, необходимо выделить сегмент покупателей, проанализировать его и предложить решение, как увеличить его покупательскую активность.
План работы над проектом

Загрузка данных
Предобработка данных
Исследовательский анализ данных
Объединение таблиц
Корреляционный анализ
Создание и применение моделей МО
Анализ важности признаков
Сегментация покупателей
Общий вывод

Выводы и рекомендации.

В процессе исследований мы использовали данные предоставленные Заказчиком содержащие информацию о клиентах, их ежемесячных тратах на покупки в магазине, о поведении клиентов на сайте, выручке и прибыли магазина от каждого постоянного покупателя. В процессе загрузки данных проблем не возникло, на этапе преобработки исправили опечатки и привели к соответствию типы данных и их содержание.
Затем мы провели исследовательский анализ данных, изучили распределения отдельных параметров и отобрали пользователей с непрерывной трехмесячной активностью. Объединили данные в датасет для корреляционного анализа и этапа моделирования.
Далее мы провели корреляционный анализ всей совокупности данных на предмет корреляции с целевым признаком отражающем снижение покупательской активности. Отметили ряд параметров с высоким коэфициентом корреляции и приступили к этапу моделирования.
Для этого использовали пайплайны. Количественные и категориальные признаки обработали в пайплайне раздельно. Для кодирования категориальных признаков использовали два кодировщика, для масштабирования количественных два скейлера. Обучили четыре модели: KNeighborsClassifier(), DecisionTreeClassifier(), LogisticRegression() и SVC(). Для каждой из них подбирали как минимум один гиперпараметр. Затем, использовав для оценки моделей подходящую для задачи метрику выбрали лучшую модель.
На этапе анализа важности признаков применили инструмент Shaply-анализа. Проанализировали полученные результаты и приступили к сегментации покупателей с целью разработки рекомендаций для Заказчика. Для этой задачи мы добавили в исследование данные о прибыли которую приносят покупатели и приступили к изучению взаимосвязи результатов модели и прибыли, а также выявлению параметров влияющих на эту связь. Опираясь на результаты моделирования и Shaply-параметры мы выделили признаки для анализа интересующего нас сегмента покупателей с высокой вероятностью снижения покупательской активности в ближайшее время.
В результате исследований мы пришли к следующим выводам относительно снижения покупательской активности и ее причин:

Первой причиной является не равномерная прибыль (маржа) продавца с товаров отдельных категорий, в результате проявляется явная корреляция между средней прибылью от отдельного покупателя и его популярной категорией. Коэффициент корреляции которой составляет 0.73, что классифицируется как сильная положительная связь. Тем более, если принять во внимание, что помимо популярной категории, любой покупатель наверняка покупает товары различных категорий, т.е. тем самым размывает эту связь, но она при этом сохраняется сильной. Данная практика (с разной маржой в категориях товаров) приводит к снижению покупательской активности у пользователей с популярной категорией товаров где маржа максимальна, а наиболее лояльные - пользователи с популярной категорией где маржа продавца минимальная.
Второй причиной является странный алгоритм распределения индивидуальных акционных предложений. Изначально, он работает правильно, орентируясь на долю акционных покупок не более 30% от общей выручки от клиента, что позволяет органично развивать лояльность покупателей. Однако, при определенном снижении выручки от условного клиента, алгоритм повышает допустимую долю акционных покупок до 40% и начинает предлагать этим клиентам больше товаров со скидкой. В результате клиенты начинают ориентироваться больше на акционные покупки и доля этих покупок быстро возрастает до граничных 40%, после чего маркетинговые коммуникации прекращаются, а клиент начинает терять лояльность и его покупательская активность закономерно снижается.

**Соответсвенно, рекомендаций будет три:**
Необходимо либо выровнять маржу по категориям товаров, либо снизить ее там где необходимо снизить вероятность снижения покупательской активности или привлечь больше покупателей. Эффект ожидается прямой ввиду сильной корреляционной связи между параметрами. По некоторым категориям с высокой лояльностью имеет смысл поднять маржу, поэтому выравнивание маржинальности по категориям предпочтительнее.
Необходимо изменить алгоритм рассылки индивидуальных предложений в части ограничения доли акционных покупок. Либо оставить 30% порог для всех пользователей вне зависимости от снижения активности клиентов, либо не ограничиваться условным порогом для прекращения маркетинговых коммуникаций, их прекращать нельзя (пока клиент на них согласен).
Для исходных данных необходимо конкретизировать периоды для параметров. Такие характеристики как - текущий, предыдущий и тд. исключить, периоды должны быть четко обозначены. Необходимо дополнить данные по пользователям количеством общих покупок и конкретным количеством купленных товаров. Необходимо раскрыть алгоритм присваивания статуса покупательской активности.
